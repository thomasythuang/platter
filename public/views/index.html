<!-- public/views/index.html -->
<!DOCTYPE html>

<!-- Angular Module -->
<html ng-app="foodApp" class="no-js">
<head>
	<!-- Meta -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1"><!-- Optimize mobile viewport -->

	<title>Platter</title>

	<!-- Universal Resources -->
	<link rel="shortcut icon" href="img/favicon.ico">
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="/css/main.css">
	<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.18/angular.min.js"></script>
	<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
</head>

<body ng-controller="galleryController" ng-init="user= <%= JSON.stringify(user) %>">

<!-- Header and Navbar -->
<header>
<nav class="navbar navbar-default">
	<div class="container">
      	<div class="navbar-header">
        	<a class="navbar-brand" href="#">Platter</a>
      	</div>

      	<ul class="nav navbar-nav navbar-right">
        	<li><a href="/"><span class="fa fa-home"></span> Home</a></li>
        	<li><a href="/upload"><span class="fa fa-upload"></span> Upload</a></li>
        	<li ng-hide="user"><a href="/login"><span class="fa fa-sign-in"></span> Login</a></li>
        	<li ng-show="user"><a href="/profile"><span class="fa fa-facebook-square"></span> {{user.facebook.name}}</a></li>
  		</ul>
	</div>
</nav>
</header>

<div id="main" class="centered">
	<!-- Gallery Settings -->
	<div>
		Sort by: 
		<select ng-model="sortMethod">
			<option value="-favorites">Most Popular</option>
			<option value="-dateAdded">Most Recent</option>
			<option value="name">Name (ascending)</option>
			<option value="-name">Name (descending)</option>
			<option value="state">Location</option>
			<option value="">Corn</option>
		</select>
		&nbsp&nbsp&nbsp&nbsp Show 
		<select ng-model="imgLimit">
			<option value=6>6</option>
			<option value=12>12</option>
			<option value=24>24</option>
		</select>
		at a time
		<button class="btn btn-primary" ng-click="test()">Test</button>
	</div><br>

	<!-- Image Gallery -->
  	<div class="loc inline" ng-repeat="img in images | orderBy: sortMethod | limitTo: imgLimit">

		<!-- Image and Short Description -->
		<div class="crop crop-sm">
			<img ng-src="{{img.url}}" data-toggle="modal" data-target="#{{img._id}}"/>
		</div>
		<div class="desc">
			<div class="" ng-click="test(img)">{{img.name}}</div>
			<div class="inline"> 
				<button type="button" class="btn btn-default" ng-click="deleteImage(img._id)">
					<span class="fa fa-trash-o"></span>
				</button>
			</div>
			<div class="inline"><div class="">{{img.city | characters:12 :false}}, {{img.state}}</div></div> 
			<div class="inline">
				<button type="button" class="btn btn-default btn-fav" ng-class="{active: checkFav(img)}" ng-click="modFavs(img)">
					<span class="glyphicon glyphicon-star"></span> {{img.favorites}}
				</button>
			</div>
		</div>

		<!-- Pop-up Modal -->
		<div class="modal fade" id="{{img._id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		  	<div class="modal-dialog">
		    	<div class="modal-content">
			      	<div class="modal-header">
			        	<h4 class="modal-title" id="myModalLabel">{{img.name}}</h4>
			      	</div>
			      	<div class="modal-body center">
			        	<div class="crop crop-lg">
							<img ng-src="{{img.url}}"/>
						</div>
			        	<p>Location: {{img.city}}, {{img.state}}</p>
			        	<p>Category: {{img.category}}</p>
			        	<p>Tags: <span ng-repeat="tag in location.tags">#{{tag}} </span>
			        	<p>Date Added: {{img.dateAdded | date: 'MM/dd/yy'}}</p>
			        	<p>by {{img.authorName}}</p>
			      	</div>
			      	<div class="modal-footer">
				      	<button type="button" class="btn btn-default btn-fav" ng-class="" ng-click="">
							<span class="glyphicon glyphicon-star"></span> {{img.favorites}}
						</button>
			        	<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
			      	</div>
		    	</div>
		  	</div>
		</div>
	</div>
</div>

<script src="/js/core-home.js"></script>
<script src="/js/controllers/galleryCtrl.js"></script>
<script src="/js/services/imgService.js"></script>
<script src="/js/filters/truncate.js"></script>
<link rel="stylesheet" href="/css/gallery.css">
</body>
</html>
