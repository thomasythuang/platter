<!-- public/views/profile.html -->
<!DOCTYPE html>

<!-- Angular Module -->
<html ng-app="foodApp" class="no-js">
<head>
	<!-- Meta -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<title>Your Profile</title>

	<!-- Universal Resources -->
	<script src="/resources/angular.min.js"></script>
	<main-resources></main-resources>
	<link rel="stylesheet" href="/css/gallery.css">
</head>

<!-- Load user data from res.render() and transfer to angular controller -->
<body ng-controller="profileController" ng-init="user= <%= JSON.stringify(user)%>; uploads= <%= JSON.stringify(uploads)%>; favorites= <%= JSON.stringify(favorites)%>">

<!-- Header and Navbar -->
<main-navbar></main-navbar>

<div class="container centered" id="main">

	<!-- Heading -->
	<div class="page-header text-center">
		<h1><span class="fa fa-anchor"></span> {{user.facebook.name}}</h1>
		<a href="/logout" class="btn btn-default btn-sm">Logout</a>
	</div>

	<div class="row left">
		<!-- Facebook Account Info -->
		<div class="col-xs-6 col-xs-offset-3">
			<div class="well">
				<h3 class="text-primary"><span class="fa fa-facebook"></span> Facebook</h3>
				<p>
					<strong>name</strong>: {{user.facebook.name}}<br>
					<strong>email</strong>: {{user.facebook.email}}<br>
					<strong>id</strong>: {{user.facebook.id}}<br>
				</p>
			</div>
		</div>
	</div>
	<br><button class="btn btn-primary" ng-click="test()">Test</button>
	<button class="btn btn-primary" ng-click="reset()">Reset</button>

	<!-- User Uploads -->
	<div>
		<h3>Uploads</h3>
		<div ng-repeat="img in uploads" class="loc inline">
			<button type="button" class="btn btn-default" ng-click="deleteImage(img._id)">
				<span class="fa fa-trash-o"></span>
			</button>
			<span>{{img.name}}</span>
			<div class="inline">
				<button type="button" class="btn btn-default btn-fav" ng-class="" ng-click="">
					<span class="glyphicon glyphicon-star"></span> {{img.favorites}}
				</button>
			</div>
			<div class="crop crop-sm">
				<img ng-src="{{img.url}}"/>
			</div>
		</div>
	</div>
	
	<!-- User Favorites -->
	<div>
		<h3>Favorites</h3>
		<div ng-repeat="fav in favorites" class="loc inline">
			<span>{{fav.name}}</span>
			<div class="inline">
				<button type="button" class="btn btn-default btn-fav" ng-class="{active: checkFav(fav)}" ng-click="">
					<span class="glyphicon glyphicon-star"></span> {{fav.favorites}}
				</button>
			</div>
			<div class="crop crop-sm">
				<img ng-src="{{fav.url}}"/>
			</div>
		</div>
	</div>

</div>
<script src="/js/core-profile.js"></script>
<script src="/js/controllers/profCtrl.js"></script>
<script src="/js/directives/coreDirective.js"></script>
<script src="/js/services/userService.js"></script>
</body>
</html>